{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "SQL Database Schema",
  "description": "Schema for Azure SQL Database resource in Bicep",
  "properties": {
    "apiVersion": {
      "type": "string",
      "enum": ["2021-02-01-preview", "2021-05-01-preview", "2021-11-01", "2022-05-01-preview"],
      "description": "The API version for the SQL database resource"
    },
    "type": {
      "type": "string",
      "const": "Microsoft.Sql/servers/databases",
      "description": "The resource type for Azure SQL Database"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]$|^[a-zA-Z0-9]$",
      "description": "SQL database name (1-63 characters, alphanumeric and hyphens)"
    },
    "location": {
      "type": "string",
      "description": "Azure region where the SQL database will be created"
    },
    "sku": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "enum": [
            "Basic", "S0", "S1", "S2", "S3", "S4", "S6", "S7", "S9", "S12",
            "P1", "P2", "P4", "P6", "P11", "P15",
            "GP_Gen5_2", "GP_Gen5_4", "GP_Gen5_8", "GP_Gen5_16", "GP_Gen5_32",
            "BC_Gen5_2", "BC_Gen5_4", "BC_Gen5_8", "BC_Gen5_16", "BC_Gen5_32"
          ],
          "description": "Database SKU name"
        },
        "tier": {
          "type": "string",
          "enum": ["Basic", "Standard", "Premium", "GeneralPurpose", "BusinessCritical"],
          "description": "Database service tier"
        },
        "capacity": {
          "type": "integer",
          "minimum": 1,
          "description": "Database capacity in DTUs or vCores"
        }
      },
      "required": ["name"]
    },
    "properties": {
      "type": "object",
      "properties": {
        "collation": {
          "type": "string",
          "default": "SQL_Latin1_General_CP1_CI_AS",
          "description": "Database collation"
        },
        "maxSizeBytes": {
          "type": "integer",
          "minimum": 104857600,
          "description": "Maximum size of the database in bytes"
        },
        "sampleName": {
          "type": "string",
          "enum": ["AdventureWorksLT", "WideWorldImportersStd", "WideWorldImportersFull"],
          "description": "Sample database to create"
        },
        "zoneRedundant": {
          "type": "boolean",
          "description": "Enable zone redundancy"
        },
        "readScale": {
          "type": "string",
          "enum": ["Enabled", "Disabled"],
          "description": "Read scale-out option"
        },
        "requestedBackupStorageRedundancy": {
          "type": "string",
          "enum": ["Local", "Zone", "Geo"],
          "description": "Backup storage redundancy"
        },
        "minCapacity": {
          "type": "number",
          "minimum": 0.5,
          "description": "Minimum capacity for serverless databases"
        },
        "autoPauseDelay": {
          "type": "integer",
          "minimum": -1,
          "description": "Auto-pause delay in minutes for serverless databases"
        }
      }
    },
    "tags": {
      "type": "object",
      "description": "Resource tags",
      "additionalProperties": {
        "type": "string"
      }
    }
  },
  "required": ["apiVersion", "type", "name", "location"],
  "additionalProperties": false
}