{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Storage Account Schema",
  "description": "Schema for Azure Storage Account resource in Bicep",
  "properties": {
    "apiVersion": {
      "type": "string",
      "enum": ["2021-04-01", "2021-08-01", "2022-05-01", "2023-01-01", "2023-05-01"],
      "description": "The API version for the storage account resource"
    },
    "type": {
      "type": "string",
      "const": "Microsoft.Storage/storageAccounts",
      "description": "The resource type for Azure Storage Account"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-z0-9]{3,24}$",
      "description": "Storage account name (3-24 lowercase alphanumeric characters)"
    },
    "location": {
      "type": "string",
      "description": "Azure region where the storage account will be created"
    },
    "sku": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "enum": [
            "Standard_LRS",
            "Standard_GRS",
            "Standard_RAGRS",
            "Standard_ZRS",
            "Standard_GZRS",
            "Standard_RAGZRS",
            "Premium_LRS",
            "Premium_ZRS"
          ],
          "description": "Storage account SKU"
        }
      },
      "required": ["name"],
      "additionalProperties": false
    },
    "kind": {
      "type": "string",
      "enum": ["Storage", "StorageV2", "BlobStorage", "FileStorage", "BlockBlobStorage"],
      "description": "Storage account kind"
    },
    "properties": {
      "type": "object",
      "properties": {
        "accessTier": {
          "type": "string",
          "enum": ["Hot", "Cool"],
          "description": "Access tier for blob storage"
        },
        "supportsHttpsTrafficOnly": {
          "type": "boolean",
          "description": "Allows https traffic only to storage service"
        },
        "minimumTlsVersion": {
          "type": "string",
          "enum": ["TLS1_0", "TLS1_1", "TLS1_2", "TLS1_3"],
          "description": "Set the minimum TLS version"
        },
        "allowBlobPublicAccess": {
          "type": "boolean",
          "description": "Allow or disallow public blob access"
        },
        "allowCrossTenantReplication": {
          "type": "boolean",
          "description": "Allow or disallow cross-tenant replication"
        }
      },
      "additionalProperties": true
    },
    "identity": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["SystemAssigned", "UserAssigned", "SystemAssigned,UserAssigned", "None"],
          "description": "The type of managed identity"
        },
        "userAssignedIdentities": {
          "type": "object",
          "description": "User-assigned managed identities",
          "additionalProperties": {
            "type": "object"
          }
        }
      },
      "required": ["type"]
    },
    "tags": {
      "type": "object",
      "description": "Resource tags",
      "additionalProperties": {
        "type": "string"
      }
    }
  },
  "required": ["apiVersion", "type", "name", "location", "sku", "kind"],
  "additionalProperties": false
}